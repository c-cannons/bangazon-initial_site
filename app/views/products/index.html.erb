<%= render template: "./shared/_header" %>

<div class="container center">

  <div class="row justify-content-center">
    <div class="col-md-8">
        <br>
        <h2>Your Products</h2>
        <h4 class="text-danger"><%= flash[:notice] %></h4>
        <br>
        <table>
        <tr id="table-headers">
            <th>Product Name</th>
            <th>Price</th>
            <th>Description</th>
            <th>Location</th>
            <th>Quantity</th>
            <th></th>
            <th></th>
        </tr> 
        
        <% @products.each do |product| %>
            <% if product[:customer_id] == session[:customer_id]%>
                <tr>
                <td><%= product.product_name %></td>
                <td><%= product.product_price %></td>
                <td><%= product.product_desc %></td>
                <td><%= product.product_location %></td>
                <td><%= product.quantity %></td>
                <td><%= link_to 'Show', product_path(product) %></td>
                <% if product.orders.ids == [] %>
                    <td><%= link_to 'Delete Product', product_path(product), method: :delete, data: {confirm: 'Are you sure you want to delete this product?'} %></td>
                <% else %>
                    <td><p class="text-secondary">Cannot be Deleted</p></td>
                <% end %>
                </tr>
            <% end %>
        <% end %>
        </table>
        </div>
    </div>
</div>